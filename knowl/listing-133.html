<!DOCTYPE html>
<html lang="en-US">
<!--**************************************-->
<!--*    Generated from PreTeXt source   *-->
<!--*    on 2019-09-09T16:15:52-06:00    *-->
<!--*                                    *-->
<!--*      https://pretextbook.org       *-->
<!--*                                    *-->
<!--**************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body>
<figure class="figure-like"><pre class="console"><b># Let's go through the listing data and add the mean price for each listing:

for x in listings.index:
    bookings = calendar.price[calendar.listing_id==listings.loc[x, 'id']]
    listings.loc[x, 'mean_price'] = np.mean(
        [float(x[1:].replace(',', '')) for x in bookings])
    listings.loc[x, 'number_of_bookings'] = len(bookings)
    
# I'm going to ignore the warning that comes up. The way to fix it is to checking that bookings
# is not empty beroe passing it to the next two statements.
</b>/anaconda3/envs/jupyterlab/lib/python3.7/site-packages/numpy/core/fromnumeric.py:3118: RuntimeWarning: Mean of empty slice.
  out=out, **kwargs)
/anaconda3/envs/jupyterlab/lib/python3.7/site-packages/numpy/core/_methods.py:85: RuntimeWarning: invalid value encountered in double_scalars
  ret = ret.dtype.type(ret / rcount)
</pre>
<figcaption><span class="type">Listing</span> <span class="codenumber">6.1.6.</span> </figcaption></figure><span class="incontext"><a href="section-34.html#listing-133">in-context</a></span>
</body>
</html>
